{% extends 'OSINT_System_Core/tso_base.html' %}
{% load static %}
{% block head_dep %}
    <link rel="stylesheet" href="{% static 'Target_Management_System/css/tso_nav_bar.css' %}" />
    <link rel="stylesheet" href="{% static 'Target_Management_System/css/tso_identifytarget.css' %}" />
{% endblock %}
{% block smallnavbar %}
    <div class="row">
        <div class="col-md-1"></div>
        <div class="col-md-8 d-flex" style="">
            <div class="col-md-1">
            </div>
            <div class="col-md-2 col-lg-2 col-xl-2 col-sm-2 secondnavmenu ">
                <a href="{% url 'Target_Management_System:tms_marktarget' %}" class="btn secondnavitems "> MARK</a>
            </div>
            <div class="col-md-2 col-lg-2 col-xl-2 col-sm-2 secondmidnavmenu">
                <a href="{% url 'Target_Management_System:tms_fetchtarget' %}" class="btn secondnavitems "> FETCH</a>
            </div>
            <div class="col-md-2 col-lg-2 col-xl-2 col-sm-2 secondmidnavmenu secondnavactive">
                <a href="{% url 'Target_Management_System:tms_identifytarget' %}" class="btn secondnavitems "> IDENTIFY</a>
            </div>
            <div class="col-md-2 col-lg-2 col-xl-2 col-sm-2 secondmidnavmenu">
                <a href="{% url 'Target_Management_System:tms_internetsurvey' %}" class="btn secondnavitems "> SURVEY</a>
            </div>
            <div class="col-md-2 col-lg-2 col-xl-2 col-sm-2 secondlastnavmenu ">
                <a href="{% url 'Target_Management_System:tms_dynamiccrawling' %}" class="btn secondnavitems "> CRAWLING</a>
            </div>
            <div class="col-md-2 col-lg-2 col-xl-2 col-sm-2 secondlastnavmenu ">
                <a href="{% url 'Target_Management_System:tms_keybase_crawling' %}" class="btn secondnavitems "> KEYBASE</a>
            </div>
        </div>
        <div class="col-md-1"></div>
    </div>
{% endblock %}
{% block belly %}
    <div class="row middlecontentdiv">
        <div class="col-md-12 col-lg-12 col-sm-12 col-md-12 topcontentbar ">
            <h4 class="topheading">Identify Target</h4>
        </div>
        <!-- end of top row -->
        <!-- inside main container -->
        <div class="col-md-12 col-lg-12 col-xl-12 col-sm-12 lol  mymainbg  ">
            <div class="">
                <!-- RPW FOR SOCIAL MEDIA -->
                <!-- Second row-->
                <div class="col-md-12 col-lg-12 col-xl-12 col-sm-12 mt-5">
                    <!-- FORM start -->
                    <form class="targetform justify-content-center pt-3 pb-3 formbg" id="indentifyForm" method="POST"
                        action="/tms/identifytarget/">
                        {% csrf_token %}
                        <div class="form-group justify-content-center text-center ">
                            <div style="" class="container input1">
                                <!--Tetfield 3 -->
                                <div class="row input-group mt-4 mb-3">
                                    <div class="col-md-3 p-0 input-group-prepend">
                                        <span class="newlabeldesign" style="font-size:13px;letter-spacing:0.1em;
                                            opacity:0.9; padding:7px 9px 0 10px;">Query
                                        </span>
                                    </div>
                                    <input type="text" class="col-md-9  form-control  newinputdesign" id="hid_query" name="query"
                                    placeholder="Please Enter Target Description" aria-label="Recipient's username"
                                    aria-describedby="basic-addon2">
                                    <input type="hidden" id="hid_website" name="website" value="ss">
                                </div>
                            </div>
                            <!-- end of 2 divided textfield-->
                        </div>
                    </div>
                </form>
                <!--FORM END-->
            </div>
            <!-- below form  -->
            <div class="col-md-12  ">
                <!-- social box for facebook -->
                <div class="row custom_row mb-3">
                    <div class="iconlabel col-md-9">
                        <i style="color:white; opacity:0.8;font-size:14px; " class="fab fa-facebook fa-1x mt-2  ml-4  ">
                        Facebook
                        </i>
                    </div>
                    <button type="button" class="col-md-3 btn btn-secondary searchbtn float-right"
                    onclick="myFunction('facebook')">
                    Search
                    </button>
                </div>
                <div class="container othercontainer d-flex justify-content-center" id="facebook_response">
                </div>
                <!-- for Instagram -->
                <div class="row custom_row mb-3">
                    <div class="iconlabel col-md-9">
                        <i style="color:white; opacity:0.8;font-size:14px; " class="fab fa-instagram fa-1x mt-2  ml-4  ">
                        Instagram
                        </i>
                    </div>
                    <button type="button" class="col-md-3 btn btn-secondary searchbtn float-right"
                    onclick="myFunction('instagram')">
                    Search
                    </button>
                </div>
                <div class="container othercontainer d-flex justify-content-center" id="instagram_response">
                </div>
                <!-- For twitter -->
                <div class="row custom_row mb-3">
                    <div class="iconlabel col-md-9">
                        <i style="color:white; opacity:0.8;font-size:14px; " class="fab fa-twitter-square fa-1x mt-2  ml-4  ">
                        Twitter
                        </i>
                    </div>
                    <button type="button" class="col-md-3 btn btn-secondary searchbtn float-right"
                    onclick="myFunction('twitter')">
                    Search
                    </button>
                </div>
                <div class="container othercontainer d-flex justify-content-center" id="twitter_response">
                </div>
                <!-- for LinkedIn -->
                <div class="row custom_row mb-3">
                    <div class="iconlabel col-md-9">
                        <i style="color:white; opacity:0.8;font-size:14px; " class="fab fa-linkedin fa-1x mt-2  ml-4  ">
                        LinkedIn
                        </i>
                    </div>
                    <button type="button" class="col-md-3 btn btn-secondary searchbtn float-right"
                    onclick="myFunction('linkedin')">
                    Search
                    </button>
                </div>
                <div class="container othercontainer d-flex justify-content-center" id="linkedin_response">
                </div>
                <!-- for LinkedIn -->
                <div class="row custom_row mb-3">
                    <div class="iconlabel col-md-9">
                        <i style="color:white; opacity:0.8;font-size:14px; " class="fab fa-reddit-square fa-1x mt-2  ml-4  ">
                        Reddit
                        </i>
                    </div>
                    <button type="button" class="col-md-3 btn btn-secondary searchbtn float-right"
                    onclick="myFunction('reddit')">
                    Search
                    </button>
                </div>
                <div class="container othercontainer d-flex justify-content-center" id="reddit_response">
                </div>
                <!-- END OF second row-->
            </div>
        </div>
    </div>
    <script>
    function myFunction(website) {
    var query = document.getElementById("hid_query").value
    $.ajax({
    url: "/tms/identifytarget_request/",
    data: {
    'query': query,
    'website': website
    },
    'success': (response) => {
    //console.log('i am called    ss  s')
    if(website == 'instagram'){
    $('#instagram_response').empty().append(response)
    }
    if(website == 'twitter'){
    $('#twitter_response').empty().append(response)
    }
    if(website == 'reddit'){
    $('#reddit_response').empty().append(response)
    }
    if(website == 'linkedin'){
    $('#linkedin_response').empty().append(response)
    }
    if(website == 'facebook'){
    $('#facebook_response').empty().append(response)
    }
    //console.log(response)
    }
    });
    }
    </script>
{% endblock %}