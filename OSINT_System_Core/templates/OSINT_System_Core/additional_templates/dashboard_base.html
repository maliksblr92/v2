{% load static %}

<!DOCTYPE html>
<html>
  <!-- Mirrored from covid.amcharts.com/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 26 Mar 2020 08:31:09 GMT -->
  <head>
    <meta charset="UTF-8" />
    <title>BIG VIEW</title>
    <meta property="og:title" content="BIG VIEW" />
    <meta property="og:description" content="A sample embeddable dashboard to visualize COVID-19 spread timeline and affected regions." />
    <meta property="og:url" content="index.html" />
    <meta property="og:site_name" content="amCharts" />
    <meta property="og:image" content="screenshot.png" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/fontawesome.min.css" integrity="sha256-CuUPKpitgFmSNQuPDL5cEfPOOJT/+bwUlhfumDJ9CI4=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js" integrity="sha256-KzZiKy0DWYsnwMF+X1DvQngQ2/FxF7MF3Ff72XcpuPs=" crossorigin="anonymous"></script>
<script type="text/javascript" src="https://www.amcharts.com/lib/4/core.js"></script>
<script type="text/javascript" src="https://www.amcharts.com/lib/4/themes/dark.js"></script>

    <script type="text/javascript" src="{% static 'Additional_assets/dashboard/js/charts.js' %}"></script>
    <script type="text/javascript" src="{% static 'Additional_assets/dashboard/js/maps.js' %}"></script>
    <script type="text/javascript" src="{% static 'Additional_assets/dashboard/js/dark.js' %}"></script>
    <script type="text/javascript" src="{% static 'Additional_assets/dashboard/js/animated.js' %}"></script>
    <script type="text/javascript" src="{% static 'Additional_assets/dashboard/js/worldLow.js' %}"></script>
    <script type="text/javascript" src="{% static 'Additional_assets/dashboard/js/countries2.js' %}"></script>
    <script type="text/javascript" src="{% static 'Additional_assets/dashboard/js/jquery-3.3.1.min.js' %}"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

<script  src="{% static 'django_eventstream/json2.js' %}"></script>
<script  src="{% static 'django_eventstream/eventsource.min.js' %}"></script>
<script  src="{% static 'django_eventstream/reconnecting-eventsource.js' %}"></script>

<script>

  var es = new ReconnectingEventSource('/events/');

es.addEventListener('reddit_trends', function (e) {
  console.log('recieved reddit_trends [channel-name="bigview_streams",channel_type="reddit_trends",page=big_view]')
  new_data=JSON.parse(e.data)
  console.log(new_data)
  len=new_data.top_trends.length
  if(new_data.trend_type=='reddit_trends'){
    $('#reddit_trends').empty();
    //console.log("Reddit data recived")
    var html='';
    for(var x=0;x<len;x++){
     // console.log(new_data.top_trends[x].author_fullname)
      var html='<div class="col-md-12"><div class="row p-1 "><div class="col-md-3 border "style="border-radius:5px"><span class="text-white font-weight-bold d-flex flex-row justify-content-center align-items-center"style="font-size:10px;">'+new_data.top_trends[x].author_fullname+'</span><span class="text-white font-weight-bold d-flex flex-row justify-content-center align-items-center  "style="font-size:10px;">'+new_data.top_trends[x].count+'</span></div><div class="col-md-9 border d-flex flex-row justify-content-start align-items-center "style="border-radius:5px"><span class="text-white font-weight-bold d-flex flex-row justify-content-start align-items-center"style="font-size:10px;">'+new_data.top_trends[x].title+'</span></div></div></div>'
      $('#reddit_trends').append(html);
    }
    console.log("Reddit Trends update complete ")

    toastr["success"]("Reddit Top trends  Updated");

    toastr.options = {
      closeButton: true,
      debug: false,
      newestOnTop: true,
      progressBar: true,
      positionClass: "toast-top-right",
      preventDuplicates: false,
      showDuration: "300",
      hideDuration: "1000",
      timeOut: "5000",
      extendedTimeOut: "1000",
      showEasing: "swing",
      hideEasing: "linear",
      showMethod: "fadeIn",
      hideMethod: "fadeOut",
    };

  }
  else{
    console.log|("some other data recived ")
  }
}, false);

es.addEventListener('twitter_trends', function (e) {
  console.log('recieved twitter_trends [channel-name="bigview_streams",channel_type="twitter_trends",page=big_view]')
  const data = JSON.parse(e.data);
  console.log(data);
  len=data.length
   $('#recent_trends_worldwide').empty() ;
  for (var x = 0; x < len; x++) {
    if (data[x].count == "count unavalible") {
      data[x].count = "N/A";
    }
    var html =' <div class="col-md-12 mt-1"><div class="row"><div class="col-md-2  m-0 p-0 custom_center"><span class="bg-dark text-white custom_center border border-warning font-weight-bold "style="border-radius:50%;height:40px;width:100%;font-size:12px;">' +data[x].count +'</span></div><div class="col-md-10 border border-warning m-0  social_posts_post custom_center"style="overflow: hidden;"><a class="text-white font-weight-bold nav-link" href=' +data[x].href +">" +data[x].name +"</a></div></div></div>";
    // var html='<div class="col-md-6"><div class="row"><div class="col-md-3  m-0 p-0 custom_center"><img src="/static/assets/dashboard_app_assets/images/profile woman (3).svg"  class="m-0 p-0 recent_trends_img" style="" alt="" /></div><div class="col-md-9 border border-warning text-white m-0 recent_trends_post p-0 m-0"><div class="w-100 h-50 d-flex flex-row  justify-content-start align-items-center  "style ="font-size:10px;overflow:hidden;"><a href="'+data.message[x].href+'">'+data.message[x].name+'</a></div><div class="text-white w-80 h-50 d-flex flex-row justify-content-start align-items-center " style ="font-size:10px;"> Count :'+data.message[x].count+'</div></div></div></div>'
    $("#recent_trends_worldwide").append(html);
  }
  console.log("Twitter Hastags Trends update complete ")
  var today = new Date();
  var date =today.getFullYear() +"-" +(today.getMonth() + 1) +"-" +today.getDate();
  var time =today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
  var dateTime = date + " " + time;
  $("#trends_update_time").empty().append("Last updated : " + dateTime);
  //show notification
  toastr["success"]("Twitter World Wide Hastags Updated ");

  toastr.options = {
    closeButton: true,
    debug: false,
    newestOnTop: true,
    progressBar: true,
    positionClass: "toast-top-right",
    preventDuplicates: false,
    showDuration: "300",
    hideDuration: "1000",
    timeOut: "5000",
    extendedTimeOut: "1000",
    showEasing: "swing",
    hideEasing: "linear",
    showMethod: "fadeIn",
    hideMethod: "fadeOut",
  };
}, false);


es.addEventListener('youtube_trends', function (e) {
  console.log('recieved youtube_trends [channel-name="bigview_streams",channel_type="youtube_trends",page=big_view]')
  const data = JSON.parse(e.data);
  console.log(data);
  len=data.trends.length
  console.log(len)
  $('#youtube_trends').empty() ;
var html=''
for (var x = 0; x < len; x++) {
var html='<div class="col-md-3 d-flex flex-column justify-content-center align-items-center border" style="border-radius:5px;"> <span class="text-white font-weight-bold d-flex flex-row justify-content-center align-items-center"style="font-size:11px;">' +data.trends[x].views +'</span><a  href="' +data.trends[x].video_link +'"class="badge badge-warning ">View</a></div><div class="col-md-9 d-flex flex-column justify-content-center align-items-center border" style="border-radius:5px;"><span class="text-white font-weight-bold d-flex flex-row justify-content-start     align-items-center"style="font-size:11px;">' +data.trends[x].video_name +'</span><span class="w-100 d-flex flex-row justify-content-center align-items-center"><img src="'+data.trends[x].thumbnail_directory+'" class="img-fluid w-25" style="height:40px;width:40px;border-radius:5px;"/><span class="w-75 text-white font-weight-bold d-flex flex-row justify-content-start align-items-center" style="font-size:11px;">Channel : ' +data.trends[x].channel_name +'</span></span></div>';
$("#youtube_trends").append(html);
}
console.log("Youtube Top   Trends update complete ")

    toastr["success"]("Youtube Top trends  Updated");

    toastr.options = {
      closeButton: true,
      debug: false,
      newestOnTop: true,
      progressBar: true,
      positionClass: "toast-top-right",
      preventDuplicates: false,
      showDuration: "300",
      hideDuration: "1000",
      timeOut: "5000",
      extendedTimeOut: "1000",
      showEasing: "swing",
      hideEasing: "linear",
      showMethod: "fadeIn",
      hideMethod: "fadeOut",
    };

}, false);






//hashtag chart update




  am4core.ready(function() {
    // Themes begin
    am4core.useTheme(am4themes_dark);
    am4core.useTheme(am4themes_animated);
    // Themes end
    var chart = am4core.create("hashtag_chart", am4charts.XYChart);
    chart.paddingBottom = 0;
    chart.paddingTop = 0;
    chart.paddingRight = 0;
    chart.paddingLeft = 0;

    chart.data = [
            {
              category: "TWITTER",
              value: '1'
              // "color": am4core.color("#fde7f9")
            },
            {
              category: "LINKEDIN",
              value: '2'
              // "color": am4core.color("#fde7f4")
            },
            {
              category: "FACEBOOK",
              value: '3'
              // "color": am4core.color("#aee3e0")
            },
            {
              category: "INSTAGRAM",
              value: '4'
              // "color": am4core.color("#72cec9")
            }
          ];
    es.addEventListener('hashtag_charts', function (e) {
      console.log('recieved hashtag_charts [channel-name="bigview_streams",channel_type="hashtag_charts",page=big_view]')
      const data = JSON.parse(e.data);
      console.log(data);

          chart.data = [
            {
              category: "TWITTER",
              value: data[0]
              // "color": am4core.color("#fde7f9")
            },
            {
              category: "LINKEDIN",
              value: data[1]
              // "color": am4core.color("#fde7f4")
            },
            {
              category: "FACEBOOK",
              value: data[2]
              // "color": am4core.color("#aee3e0")
            },
            {
              category: "INSTAGRAM",
              value: data[3]
              // "color": am4core.color("#72cec9")
            }
          ];

          console.log("hashtag_charts   update completed ")

    toastr["success"]("Hashtag Chart Updated Successfully");

    toastr.options = {
      closeButton: true,
      debug: false,
      newestOnTop: true,
      progressBar: true,
      positionClass: "toast-top-right",
      preventDuplicates: false,
      showDuration: "300",
      hideDuration: "1000",
      timeOut: "5000",
      extendedTimeOut: "1000",
      showEasing: "swing",
      hideEasing: "linear",
      showMethod: "fadeIn",
      hideMethod: "fadeOut",
    };

        }, false);



    var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());
    categoryAxis.renderer.grid.template.location = 0;
    categoryAxis.dataFields.category = "category";
    categoryAxis.renderer.minGridDistance = 15;
    categoryAxis.renderer.grid.template.location = 0.5;
    categoryAxis.renderer.grid.template.strokeDasharray = "1,3";
    categoryAxis.renderer.labels.template.rotation = -90;
    categoryAxis.renderer.labels.template.fontSize = 10;
    categoryAxis.renderer.labels.template.horizontalCenter = "left";
    categoryAxis.renderer.labels.template.location = 0.5;
    categoryAxis.renderer.labels.template.adapter.add("dx", function(dx, target) {
    return -target.maxRight / 2;
    })
    var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());
    valueAxis.tooltip.disabled = true;
    valueAxis.renderer.ticks.template.disabled = true;
    valueAxis.renderer.axisFills.template.disabled = true;
    var series = chart.series.push(new am4charts.ColumnSeries());
    series.dataFields.categoryX = "category";
    series.dataFields.valueY = "value";
    series.tooltipText = "{valueY.value}";
    series.sequencedInterpolation = true;
    series.fillOpacity = 0;
    series.strokeOpacity = 1;
    series.strokeDashArray = "1,3";
    series.columns.template.width = 0.01;
    series.tooltip.pointerOrientation = "horizontal";
    var bullet = series.bullets.create(am4charts.CircleBullet);
    chart.cursor = new am4charts.XYCursor();
    chart.scrollbarX = new am4core.Scrollbar();
    chart.scrollbarY = new am4core.Scrollbar();
    }); // end am4core.ready()




//youtube chart update



am4core.ready(function() {
  am4core.useTheme(am4themes_animated);
  var chart = am4core.create("youtube_charts", am4charts.PieChart);
  chart.paddingBottom = 0;
  chart.paddingTop = 0;
  chart.paddingRight = 0;
  chart.paddingLeft = 0;

  chart.data = [
  {
    platform: "TWITTER",
    values: '2000'
    // "color": am4core.color("#fde7f9")
  },
  {
    platform: "LINKEDIN",
    values: '2000'
    // "color": am4core.color("#fde7f4")
  },
  {
    platform: "FACEBOOK",
    values: '2000'
    // "color": am4core.color("#aee3e0")
  },
  {
    platform: "INSTAGRAM",
    values: '2000'
    // "color": am4core.color("#72cec9")
  }
];

  // chart.data = [ {
  // "platform": "TWITTER",
  // "values": "{{list1.0}}",
  // // "color": am4core.color("#fde7f9")
  // }, {
  // "platform": "LINKEDIN",
  // "values": "{{list1.1}}",
  // // "color": am4core.color("#fde7f4")
  // }, {
  // "platform": "FACEBOOK",
  // "values":  "{{list1.2}}",
  // // "color": am4core.color("#aee3e0")
  // }, {
  // "platform": "INSTAGRAM",
  // "values":  "{{list1.3}}",
  // // "color": am4core.color("#72cec9")
  // },
  // ];

  es.addEventListener('youtube_charts', function (e) {
    console.log('recieved youtube_charts [channel-name="bigview_streams",channel_type="youtube_charts",page=big_view]')
    const data = JSON.parse(e.data);
    console.log(data);


    chart.data = [
      {
        platform: "TWITTER",
        values: data[0]
        // "color": am4core.color("#fde7f9")
      },
      {
        platform: "LINKEDIN",
        values: data[1]
        // "color": am4core.color("#fde7f4")
      },
      {
        platform: "FACEBOOK",
        values: data[2]
        // "color": am4core.color("#aee3e0")
      },
      {
        platform: "INSTAGRAM",
        values: data[3]
        // "color": am4core.color("#72cec9")
      }
    ];
console.log("Youtube Chart Update Complete ")
    //show notification
toastr["success"]("Youtube Chart Update Complete ");

toastr.options = {
  closeButton: true,
  debug: false,
  newestOnTop: true,
  progressBar: true,
  positionClass: "toast-top-right",
  preventDuplicates: false,
  showDuration: "300",
  hideDuration: "1000",
  timeOut: "5000",
  extendedTimeOut: "1000",
  showEasing: "swing",
  hideEasing: "linear",
  showMethod: "fadeIn",
  hideMethod: "fadeOut",
};
  },false);

  // Set inner radius
  chart.innerRadius = am4core.percent(60);

  // Add and configure Series
  var pieSeries = chart.series.push(new am4charts.PieSeries());
  pieSeries.dataFields.value = "values";
  pieSeries.dataFields.category = "platform";
  pieSeries.slices.template.stroke = am4core.color("#000");
  pieSeries.slices.template.strokeWidth = 2;
  pieSeries.slices.template.strokeOpacity = 1;
  pieSeries.slices.template.propertyFields.fill = "color";
  pieSeries.labels.template.fontSize = 10;
  pieSeries.labels.template.fontColor = "black";

  pieSeries.ticks.template.disabled = true;
  pieSeries.alignLabels = false;
  pieSeries.labels.template.text = "{value.percent.formatNumber('#.0')}%";
  pieSeries.labels.template.radius = am4core.percent(-40);
  pieSeries.labels.template.fill = am4core.color("white");

  // pieSeries.labels.template.disabled = true;
  // pieSeries.ticks.template.disabled = true;
  // This creates initial animation
  pieSeries.hiddenState.properties.opacity = 1;
  pieSeries.hiddenState.properties.endAngle = -90;
  pieSeries.hiddenState.properties.startAngle = -90;
  let rgm = new am4core.RadialGradientModifier();
  rgm.brightnesses.push(-0.8, -0.8, -0.5, 0, -0.5);
  pieSeries.slices.template.fillModifier = rgm;
  pieSeries.slices.template.strokeModifier = rgm;
  pieSeries.slices.template.strokeOpacity = 0.4;
  pieSeries.slices.template.strokeWidth = 0;
}); // end am4core.ready()




























  </script>

    <link rel="stylesheet" media="all" href="{% static 'Additional_assets/dashboard/css/jquery.dataTables.min.css' %}" />
    <link rel="stylesheet" media="all" href="{% static 'Additional_assets/dashboard/css/select.dataTables.min.css' %}" />
    <script type="text/javascript" src="{% static 'Additional_assets/dashboard/js/jquery.dataTables.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'Additional_assets/dashboard/js/dataTables.select.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'Additional_assets/dashboard/js/world_timeline.js' %}"></script>
    <script type="text/javascript" src="{% static 'Additional_assets/dashboard/js/total_timeline.js' %}"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" media="all" href="{% static 'Additional_assets/dashboard/css/dark.css' %}" />
    <script type="text/javascript" src="{% static 'Additional_assets/dashboard/js/app.js' %}"></script>

    <!-- toatsr -->
    <link rel="stylesheet" type="text/css"  href="{% static 'Additional_assets/dashboard/css/toastr.min.css' %}"/>

    <style type="text/css">
        #items {
        padding-bottom: 100px;
        }
        #info {
        position: absolute;
        background: #444;
        box-sizing: border border-warning-box;
        padding: 5px;
        bottom: 0;
        margin-right: 20px;
        margin-bottom: 0px;
        }
        p {
        margin: 5px;
        }
        a {
        color: #fff;
        }
        </style>
        <style type="text/css">
        .custom_center_row{
        display: flex!important;
        flex-direction: row!important;
        justify-content: center!important;
        align-items: center!important;
        }
        .custom_center_col{
        display: flex!important;
        flex-direction: column!important;
        justify-content: center!important;
        align-items: center!important;
        }
        .custom_center{
        display: flex!important;
        justify-content: center;
        align-items: center;
        }
        .vertical_text{
        writing-mode: vertical-lr;
        }
        </style>
        <style type="text/css">
        .card1_text{
        font-size:20px;
        }
        .card1_col1{
        border-right:1px solid white;
        /*   background-color: #fde7f9;
        background-image: linear-gradient(315deg, #fde7f9 0%, #aacaef 74%);*/
        border-radius: 10px 0px 0px 10px;
        }

        .card_headers{
        border-radius:10px 10px 0px 0px;
        font-weight: bold;
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
       }
        .card1_row{
        border-radius: 10px;
        }
        </style>
        <style type="text/css">
        .card2_text{
        font-size:20px;
        }
        .card2_col1{
        border-right:1px solid white;
        /*   background-color: #fde7f9;
        background-image: linear-gradient(315deg, #fde7f9 0%, #aacaef 74%);*/
        border-radius: 10px 0px 0px 10px;
        }
        .card2_row{
        border-radius: 10px;
        }

        </style>
        <style type="text/css">
        .recent_trends_img{
        height: 60px;width: 100%;
        }
        .recent_trends_post{

        border-radius:5px;
        height: 50px;
        }
        </style>
        <style type="text/css">
        .social_posts_img{
        height: 50px;width: 100%;
        }
        .social_posts_post{
        font-size: 10px;
        border-radius:5px;
        height: 45px;
        }
        </style>
        <style type="text/css">
        html {
        --scrollbarBG: #CFD8DC;
        --thumbBG: #90A4AE;
        }
        ::-webkit-scrollbar {
        width: 7px;
        scrollbar-width: thin;
        scrollbar-color: var(--thumbBG) var(--scrollbarBG);
        }
        ::-webkit-scrollbar-track {
        background: var(--scrollbarBG);
        }
        ::-webkit-scrollbar-thumb {
        background-color: var(--thumbBG) ;
        border-radius: 6px;
        border: 3px solid var(--scrollbarBG);
        }
        </style>
        <style type="text/css">
          .header{
        border:1px solid black ;
    height: auto;
     background: rgb(74,103,121);
    background: linear-gradient(90deg, rgba(74,103,121,1) 67%, rgba(128,138,173,1) 100%, rgba(0,212,255,1) 100%);
    -webkit-clip-path: polygon(0% 15%, 7% 15%, 7% 0, 93% 0, 93% 15%, 100% 15%, 100% 85%, 93% 85%, 93% 100%, 7% 100%, 7% 85%, 0% 85%);
    clip-path: polygon(0% 15%, 7% 15%, 7% 0, 93% 0, 93% 15%, 100% 15%, 100% 85%, 93% 85%, 93% 100%, 7% 100%, 7% 85%, 0% 85%);



      }


       .footer{
        border:1px solid black ;
    height: auto;
     background: rgb(74,103,121);
    background: linear-gradient(90deg, rgba(74,103,121,1) 67%, rgba(128,138,173,1) 100%, rgba(0,212,255,1) 100%);
    -webkit-clip-path: polygon(0% 15%, 7% 15%, 7% 0, 93% 0, 93% 15%, 100% 15%, 100% 85%, 93% 85%, 93% 100%, 7% 100%, 7% 85%, 0% 85%);
    clip-path: polygon(0% 15%, 7% 15%, 7% 0, 93% 0, 93% 15%, 100% 15%, 100% 85%, 93% 85%, 93% 100%, 7% 100%, 7% 85%, 0% 85%);



      }
      #refesh_world_wide_trends_btn{
        height: 25px;
        width: auto;
        font-size: 10px;;
      }
        </style>
      </head>
      <body
      >

{% block content %}


{% endblock  %}


{##}
{#      <script type="text/javascript" src="{% static 'Additional_assets/dashboard/charts/worldwide_hastags.js' %}"></script>#}
{#     <script type="text/javascript" src="{% static 'Additional_assets/dashboard/charts/barchart_1.js' %}"></script>#}
{#     <script type="text/javascript" src="{% static 'Additional_assets/dashboard/charts/donut_chart.js' %}"></script>#}


      </body>
      <!-- Mirrored from covid.amcharts.com/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 26 Mar 2020 08:31:46 GMT -->
    </html>